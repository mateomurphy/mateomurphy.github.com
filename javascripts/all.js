var lastId,topMenu=$(".menu"),menuItems=topMenu.find("a"),scrollItems=menuItems.map(function(){var t=$($(this).attr("href"));if(t.length)return t});menuItems.click(function(t){var e=$(this).attr("href"),n=$(e).position().top,s=$(".content").scrollTop();$(".content").stop().animate({scrollTop:s+n},300),t.preventDefault()}),$(".content").scroll(function(){var t=($(this).scrollTop(),scrollItems.map(function(){if($(this).position().top<=100)return this}));t=t[t.length-1];var e=t&&t.length?t[0].id:"";lastId!==e&&(lastId=e,menuItems.parent().removeClass("active").end().filter("[href='#"+e+"']").parent().addClass("active"))});